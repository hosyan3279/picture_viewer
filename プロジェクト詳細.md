# picture_viewer プロジェクト概要

このプロジェクトは、画像の読み込み、キャッシュ、および表示に関連する機能を提供する画像ビューアーです。Python を用いて実装されており、MVC（モデル・ビュー・コントローラ）アーキテクチャを意識した構造になっています。

---

## ファイル構造
```
picture_viewer/
├── .gitignore
├── .python-version
├── main.py
├── pyproject.toml
├── README.md
├── requirements.txt
├── uv.lock
├── __pycache__/
├── .git/
│   ├── config
│   ├── description
│   ├── HEAD
│   ├── branches/
│   ├── hooks/ (各種サンプルスクリプト)
│   ├── info/exclude
│   ├── objects/
│   └── refs/
│       ├── heads/
│       └── tags/
├── controllers/
│   ├── __init__.py
│   ├── batch_processor.py
│   ├── directory_scanner.py
│   ├── enhanced_image_loader.py
│   ├── image_loader.py
│   ├── optimized_thumbnail_worker.py
│   ├── worker_manager.py
│   └── workers.py
├── models/
│   ├── __init__.py
│   ├── advanced_thumbnail_cache.py
│   ├── enhanced_thumbnail_cache.py
│   ├── image_model.py
│   └── thumbnail_cache.py
├── tests/
│   ├── __init__.py
│   ├── run_all_tests.py
│   ├── test_image_model.py
│   ├── test_thumbnail_cache.py
│   └── test_worker_manager.py
├── utils/
│   └── memory_monitor.py
└── views/
    ├── __init__.py
    ├── enhanced_grid_view.py
    ├── image_grid_view.py
    ├── lazy_image_label.py
    ├── main_window.py
    └── scroll_aware_image_grid.py
```

---

## 各ディレクトリ・モジュールの詳細
- **main.py**: プロジェクトのエントリーポイント。各種モジュール（controllers、models、viewsなど）を統合し、アプリケーションを初期化・実行する。

- **controllers**: 画像処理やディレクトリの走査、サムネイル生成、ワーカー管理などの機能を担当。
  - *batch_processor.py*: バッチ処理を実施し、複数の画像処理タスクをまとめて処理する。
  - *directory_scanner.py*: 画像ファイルの所在をスキャンし、利用可能なファイル一覧を取得。
  - *enhanced_image_loader.py / image_loader.py*: 画像読み込み機能を提供、前処理やフォーマット変換の可能性も含む。
  - *optimized_thumbnail_worker.py*: 効率的なサムネイル生成を行うワーカー。
  - *worker_manager.py & workers.py*: ワーカーの分散処理や管理を担当し、並列タスク処理を実現。

- **models**: 画像データおよびサムネイルキャッシュの管理を行う。
  - *advanced_thumbnail_cache.py / enhanced_thumbnail_cache.py*: 高度なキャッシュ戦略で画像の再読み込みを防止。
  - *image_model.py*: 画像のパス、メタデータ等を管理するデータモデル。
  - *thumbnail_cache.py*: 基本的なサムネイル生成とキャッシュ機能を実装。

- **tests**: 単体テストや統合テストによって各コンポーネントの動作検証を実施。
  - *run_all_tests.py*: すべてのテストを実行するエントリーポイント。
  - *test_image_model.py, test_thumbnail_cache.py, test_worker_manager.py*: 個別モジュールの詳細なテストケース。

- **utils**: メモリモニタリングなどのユーティリティ機能を提供する。
  - *memory_monitor.py*: アプリケーションのリソース使用量を監視するツール。

- **views**: ユーザーインターフェースの構築に関連するモジュール群。
  - *main_window.py*: アプリケーションの主要なウィンドウを実装。
  - *enhanced_grid_view.py, image_grid_view.py, scroll_aware_image_grid.py*: 画像のグリッド表示、スクロールなどのUI処理を実装。
  - *lazy_image_label.py*: 遅延読み込みをサポートし、初期ロードのパフォーマンス向上に貢献。

---

## プロジェクトの機能と特徴
- **画像読み込みとキャッシュ機能**  
  効率的な画像読み込みと、サムネイルキャッシュによる再読み込み回避を実現。

- **ユーザーインターフェース**  
  各種ビューを利用した高度な画像表示、グリッドレイアウト、スクロール処理、遅延読み込み対応。

- **並列画像処理**  
  マルチプロセス/スレッドによるワーカーの管理で、画像処理タスクの分散実行を実現。

- **テスト体制**  
  ユニットテストおよび統合テストにより、各コンポーネントの信頼性を確保。

- **ユーティリティツール**  
  メモリ・リソース監視機能により、実行中のパフォーマンスを管理。

---

## 結論
プロジェクトは、明確に分離された各モジュールにより保守性・拡張性が高く、ユーザーに対して優れた画像閲覧体験を提供します。